on: workflow_dispatch
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: azure/login@v2
      with:
        auth-type: 'SERVICEPRINCIPAL'
        creds: ${{ secrets.KEYVAULTSECRET }}    
        enable-AzPSSession: true
    - uses: Azure/get-keyvault-secrets@v1.0
      id: azurekeyvault
      with:
        keyvault: "kv-gwu72je4akl7g"
        SecretName1: "AZURE-COSMOS-CONNECTION-STRING"          
    - name: Use Secret
      run: echo "My secret is ${{ steps.azurekeyvault.outputs.SecretName1 }}"
    
